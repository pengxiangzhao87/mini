<!--pages/commodity/detail/detail.wxml-->
<view class="contain">
  <swiper class='head' indicator-dots='true' autoplay='true' interval='5000' duration='1000' circular='true'>
    <block wx:for="{{detail.urlList}}" wx:for-index="idx" wx:key="s_id">
      <swiper-item  style="height: 100%;width:100%;">
        <block wx:if="{{detail.isVideo==1 && idx==0}}">
          <video style="width:100%;height:100%;" src="{{baseUrl}}upload/{{item}}" muted="true" show-mute-btn="true" autoplay="false" loop="true" object-fit="fill"></video>
        </block>
        <block wx:elif="{{detail.isVideo==0 || idex!=0}}">
          <image style="height: 100%;width:100%;" src='{{baseUrl}}upload/{{item}}' mode="aspectFit"></image> 
        </block>  
      </swiper-item>
    </block>
  </swiper>
  <view style="display: flex;  flex-direction:row ;align-items: center;margin-top:10px;">
    <view style="margin-left:10px;font-size:16px;width:70%;">{{detail.s_name}}</view>
    <!-- <button style="width:20px;height:20px;padding:0 0 0 0;margin-left:auto;margin-right:10px;" data-id="{{detail.s_id}}" data-img="{{shareUrl}}" data-name="{{detail.s_name}}" open-type="share"><image src="/image/fenxiang.png" style="width:20px;height:20px;"></image></button> -->
    <image src="/image/fenxiang.png" style="width:20px;height:20px;margin-left:auto;margin-right:10px;" bindtap="toShare"></image>
  </view>


<canvas canvas-id="shareCanvas" style="width:300px;height:500px;"></canvas>

  <view class="priceUnit">
    <view><text style="color:#FF1907 ;font-size:16px;">{{detail.price}}</text>{{detail.unit}}</view>
  </view>
  <view class="specification">
    <view style="margin-left:10px;color:#999999;font-size:14px;">规格</view>
    <view style="display:flex;flex-direction:row;align-items: center;margin-right:10px;margin-left:auto;">
      <view class="btn {{disabled?'btn_disabled':''}}" hover-class="afterbtn" bindtap="subtract" disabled="{{disabled}}">{{detail.init_unit==0?50:1}}</view>
      <image src="/image/shouye_xq_sub@3x.png" style="margin-left:5px;margin-right:7px;height:1.3px;width:10px"></image>
      <view style="font-size:14px;color:#333333;display:flex;align-items: center;"><text decode="true">{{detail.init_num}}&nbsp;{{detail.init_unit==0?'g':'个'}}</text></view>
      <image src="/image/shouye_xq_add@3x.png" style="margin-left:7px;margin-right:5px;height:10px;width:10px"></image>
      <view class="btn" hover-class="afterbtn" bindtap="add">{{detail.init_unit==0?50:1}}</view>
    </view>
  </view>
  <view style="margin-top:10px;width:100%;height:10px;background-color:#F5F5F5;"></view>
  <view class="desc">
    <view style="color:#666666;font-size:16px;align-items: center;justify-content: center;height:44px;display:flex;">商品详情</view>
    <view>
      <image src="{{baseUrl}}upload/{{detail.s_desc}}" mode="widthFix"></image>

    </view>
    <view >
      <image src="{{baseUrl}}upload/{{detail.sales_desc}}" mode='widthFix'></image>
    </view>
  </view>

  <view class="page_bottom">
    <view bindtap="toShoppingCar" class="toShoppingCar">
      <image src="/image/gouwuche@3x.png" style="margin-top:5px;width:25px;height:25px;"></image>
      <view hidden="{{detail.carSum==0}}">
        <view class="carSum" >{{detail.carSum}}</view>
      </view>
      
    </view>
    <view style="margin-right:10px;margin-left:auto;">
      <view wx:if="{{detail.state==1}}">
        <view style="display:flex;align-items: center;justify-content: center;  ">
          <view style="color:#FF1907;margin-right:10px;font-size:18px;">￥{{detail.totalPrice}}</view>
          <view class="addShoppingCar" bindtap="addShoppingCar"><text style="font-size:16px;color:#333333;">加入到购物车</text></view>
        </view>
      </view>
      <view wx:elif="{{detail.state==0}}">
        <view class="disabledCar" ><text style="font-size:16px;color:white;">补货中</text></view>
      </view>
    </view>
  </view>   
</view>




<view class="modal modal-bottom-dialog" style="border-bottom:1px solid rgb(245, 245, 245)" hidden="{{hideFlag}}">
  <view class="modal-cancel" bindtap="hideModal" catchtouchmove="disableRoll"></view>
  <view class="bottom-dialog-body bottom-positon" animation="{{animationData}}">
    <view style="display:flex;flex-direction:row;align-items: center;">
      <button data-id="{{detail.s_id}}" data-img="{{shareUrl}}" data-name="{{detail.s_name}}" open-type="share" style="width:100px;padding:0 0 0 0;background-color:#FFFFFF;margin-right:0px;">
        <view style="display:flex;width:100px;justify-content: center;"><image style="width:35px;height:35px;" src="/image/fx_weixin.png"></image></view>
        <view style="display:flex;width:100px;justify-content: center;font-size:13px;color:#666666 ;margin-top:5px;">分享给好友</view>
      </button>
      <view style="margin-left:10%;" bindtap="shareToCircle">
        <view style="display: flex;width:100px;justify-content: center;"><image style="width:35px;height:35px;" src="/image/fx_friends.png"></image></view>
        <view style="width:100px;display: flex;justify-content: center;font-size:13px;color:#666666 ;margin-top:5px;">分享到朋友圈</view>
      </view> 
    </view>
  </view>
</view>
